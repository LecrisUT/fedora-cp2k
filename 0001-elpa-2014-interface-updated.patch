From f09e7a93579edd1a990325bcc80e5cb6eee3bb07 Mon Sep 17 00:00:00 2001
From: Alin Marin Elena <alinm.elena@gmail.com>
Date: Tue, 9 Dec 2014 10:19:34 +0000
Subject: [PATCH] elpa 2014 interface updated

---
 cp2k/src/fm/cp_fm_diag.F | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/cp2k/src/fm/cp_fm_diag.F b/cp2k/src/fm/cp_fm_diag.F
index afc2c0f..2fc66aa 100644
--- a/cp2k/src/fm/cp_fm_diag.F
+++ b/cp2k/src/fm/cp_fm_diag.F
@@ -954,7 +954,7 @@ CONTAINS
                                                 istat, mypcol, &
                                                 myprow, n, n_rows, nblk, neig
     INTEGER, DIMENSION(9)                    :: descm, descv
-    LOGICAL                                  :: failure
+    LOGICAL                                  :: failure,success
     REAL(KIND=dp), DIMENSION(:), POINTER     :: eval
     REAL(KIND=dp), DIMENSION(:, :), POINTER  :: m, m1, v
     TYPE(cp_blacs_env_type), POINTER         :: context
@@ -1000,7 +1000,7 @@ CONTAINS
     CPPrecondition(istat==0,cp_failure_level,routineP,error,failure)
 #if defined (__ELPA)
     ! Calculate eigenvalues/eigenvectors
-    CALL solve_evp_real_2stage(n,neig,m,n_rows, eval,v,n_rows,nblk,comm_row,comm_col,group)
+    success = solve_evp_real_2stage(n,neig,m,n_rows, eval,v,n_rows,nblk,comm_row,comm_col,group)
 #else
     CPPrecondition(.FALSE.,cp_failure_level,routineP,error,failure)
 #endif
-- 
2.2.0

